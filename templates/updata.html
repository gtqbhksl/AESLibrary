<!DOCTYPE html>
<html lang="en">
<body>
<style>
    #cont {
        text-align: center;
        padding: 20px;
    }
</style>
<a href="/index"><img src="../static/img/re.png"width="50px"height="50px"></a>
    <div id="cont">
    <h2>图书修改</h2>
    <form id="myform" style="align-content: center" action="/update" method="post">
        <div>
            <lable>编号：</lable>
            <input type="text" readonly name="id" id="id" value="{{ data[0] }}" />
        </div>
        <div style="margin-top: 30px">
            <lable>书名：</lable>
            <input type="text" name="books" id="books" value="{{ data[2] }}"/>
        </div>
        <div style="margin-top: 30px">
            <lable>作者：</lable>
            <input type="text" name="name" id="name" value="{{ data[1] }}"/>
        </div>
        <div style="margin-top: 30px">
            <lable>价格：</lable>
            <input type="text" name="price" id="price" value="{{ data[3] }}"/>
        </div>
        <button style="margin-top: 30px"  type="submit" class="btn btn-outline-success">修改</button>
    </form>
    <button  class="btn btn-outline-success" onclick="show()">解密数据</button>
    <button  class="btn btn-outline-success" onclick="encrypto_show()">加密数据</button>
</div>

<script src="static/vendor/aos/aos.js"></script>
<script src="static/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="static/vendor/glightbox/js/glightbox.min.js"></script>
<script src="static/vendor/isotope-layout/isotope.pkgd.min.js"></script>
<script src="static/vendor/php-email-form/validate.js"></script>
<script src="static/vendor/purecounter/purecounter.js"></script>
<script src="static/vendor/swiper/swiper-bundle.min.js"></script>
<script src="static/vendor/typed.js/typed.min.js"></script>
<script src="static/vendor/waypoints/noframework.waypoints.js"></script>
<script src="static/js/main.js"></script>
<script src="../static/jquery-3.4.1.js"></script>
<script src="static/js/sjcl.js"></script>
<script>
    function show(){
        let books = document.getElementById('books');
        let name = document.getElementById('name');
        let price = document.getElementById('price');

        de_books = decryptData(books.value);
        de_name = decryptData(name.value);
        de_price = decryptData(price.value);
        books.value = de_books;
        name.value = de_name;
        price.value = de_price;
    }
    function encrypto_show(){
        let books = document.getElementById('books');
        let name = document.getElementById('name');
        let price = document.getElementById('price');
        books.value = encryptData(books.value);
        name.value = encryptData(name.value);
        price.value = encryptData(price.value);
    }
    function decryptData(encryptedData) {
        // 解密密钥
        var decryptionKey = '1234567890123456';

        // 使用sjcl库对加密数据进行解密
        //console.log(JSON.stringify(encryptedData));
        var decryptedData = sjcl.decrypt(decryptionKey, encryptedData);
        console.log(decryptedData);
        return decryptedData;
    }
    function encryptData(cryptedData) {
        // 密钥
        var decryptionKey = '1234567890123456';

        // 使用sjcl库对加密数据进行解密
        //console.log(JSON.stringify(encryptedData));
        var decryptedData = sjcl.encrypt(decryptionKey, cryptedData);
        console.log(decryptedData);
        return decryptedData;
    }
</script>
</body>
<head>
    <meta charset="UTF-8">
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>信息安全课程设计</title>
    <meta content="" name="description">
    <meta content="" name="keywords">
    <link href="static/img/favicon.png" rel="icon">
    <link href="static/img/apple-touch-icon.png" rel="apple-touch-icon">
    <link href="static/vendor/aos/aos.css" rel="stylesheet">
    <link href="static/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="static/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
    <link href="static/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
    <link href="static/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
    <link href="static/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">
    <link href="static/css/style.css" rel="stylesheet">
    <title>查询结果</title>
</head>
</html>